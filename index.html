<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Habitapocalypse v0.8</title>
        <style>
            body {
                margin: 0;
                font-family: ui-monospace, monospace;
                background: #0b0f14;
                color: #e8f1ff;
                display: flex;
                justify-content: center;
                padding: 20px;
                transition: background 1s;
            }

            #gameContainer {
                display: flex;
                flex-direction: column;
                align-items: center;
                width: 100%;
                transition: transform 0.1s;
                animation: bgCorruption 10s infinite alternate;
            }

            @keyframes bgCorruption {
                0% { filter: brightness(1); }
                75% { filter: brightness(0.9) hue-rotate(20deg); }
                100% { filter: brightness(0.7) hue-rotate(180deg); }
            }

            /* Panic mode with proper tremor */
            .panic {
                animation: tremor calc(var(--jitter-speed, 0.01s)) infinite linear;
                filter: hue-rotate(-20deg) contrast(1.05);
            }
            @keyframes tremor {
                0% { transform: translate(0, 0); }
                25% { transform: translate(var(--jitter-x, 5px), calc(var(--jitter-y, -5px) * -1)); }
                50% { transform: translate(0, var(--jitter-y, 5px)); }
                75% { transform: translate(calc(var(--jitter-x, -5px) * -1), 0); }
                100% { transform: translate(0, 0); }
            }

            h1 {
                font-size: 2rem;
                margin-bottom: 0.5rem;
                color: #ff80bf;
                text-shadow: 0 0 8px #ff80bf;
            }

            .stats {
                display: flex;
                gap: 20px;
                margin: 20px 0;
                flex-wrap: wrap;
                justify-content: center;
            }

            .stat {
                background: #0f1622;
                border: 1px solid #1f2a3a;
                padding: 10px 14px;
                border-radius: 12px;
                text-align: center;
                min-width: 90px;
            }

            .avatar {
                margin: 10px 0;
                font-size: 1.5rem;
                transition: color 0.5s;
            }

            .buttons {
                display: grid;
                gap: 12px;
                max-width: 400px;
                width: 100%;
            }

            button {
                background: #0f1622;
                color: #e8f1ff;
                border: 1px solid #2a3b54;
                padding: 10px;
                border-radius: 10px;
                cursor: pointer;
                transition: border-color 0.2s, box-shadow 0.2s;
            }

            button:hover {
                border-color: #ff80bf;
                box-shadow: 0 0 12px #ff80bf;
            }

            button.hidden {
                display: none;
            }

            .log {
                margin-top: 20px;
                background: #091019;
                border: 1px dashed #243247;
                padding: 12px;
                border-radius: 10px;
                max-width: 500px;
                width: 100%;
                height: 180px;
                overflow-y: auto;
                font-size: 0.9rem;
            }

            .title {
                margin-top: 10px;
                color: #80ffcc;
                font-weight: bold;
            }

            .toast {
                position: fixed;
                bottom: 20px;
                right: 20px;
                background: #0f1622;
                border: 1px solid #ff6b6b;
                color: #ff80bf;
                padding: 12px 16px;
                border-radius: 8px;
                box-shadow: 0 0 10px #ff4040;
                opacity: 0;
                transition: opacity 0.4s;
                max-width: 240px;
                font-size: 0.85rem;
                z-index: 1000;
            }

            .toast.show {
                opacity: 1;
            }

            #crisisPopup,
            #endingPopup,
            #warningModal,
            #realityCheck,
            #reviewsPage {
                display: none;
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: #0b0f14;
                border: 2px solid #ff4040;
                padding: 20px;
                text-align: center;
                box-shadow: 0 0 20px #ff4040;
                z-index: 999;
                max-width: 90vw;
                max-height: 90vh;
                overflow-y: auto;
            }

            #crisisPopup pre,
            #endingPopup pre,
            #realityCheck pre {
                margin: 10px 0;
                font-size: 0.8rem;
                color: #ff80bf;
                animation: flicker 0.1s infinite alternate;
                white-space: pre-wrap;
            }

            @keyframes flicker {
                0% { opacity: 1; }
                100% { opacity: 0.9; }
            }

            .achievements {
                position: fixed;
                top: 20px;
                left: 20px;
                background: rgba(15, 22, 34, 0.8);
                border: 1px solid #243247;
                padding: 10px;
                border-radius: 8px;
                max-width: 180px;
                font-size: 0.7rem;
            }

            .nav {
                margin: 10px;
                font-size: 0.8rem;
                color: #8080a0;
                cursor: pointer;
                text-decoration: underline;
            }
        </style>
    </head>
    <body>
        <!-- Landing Page / Reviews -->
        <div id="reviewsPage">
            <h2>Habitapocalypse v0.8</h2>
            <p><em>Level up your burnout. Humanity is the debuff.</em></p>
            <p>â­â­â­â­â­ "A masterclass in satirical game design." â€” AI Reviewer</p>
            <p>â­â­â­â­â­ "I haven't slept in 4 days. My dog left me. But I'm level 12!" â€” @BurnoutGuru69</p>
            <p>â­â­â­â­â­ "This app cured my need for validation. Now I only seek error logs." â€” Former Human</p>
            <p>â­â­â­â­â­ "I played during therapy. My therapist cried. I felt nothing." â€” Emotionally Optimizedâ„¢</p>
            <button onclick="startGame()">Play Habitapocalypse</button>
        </div>

        <!-- Content Warning Modal -->
        <div id="warningModal">
            <h3>âš ï¸ Content Warning</h3>
            <p><strong>Habitapocalypse is a dark satire</strong> of productivity culture, tech bro mentality, and the gamification of suffering.</p>
            <p>It mocks harmful habits like sleep deprivation, social isolation, and burnout.</p>
            <p><strong>No actual humans should skip sleep, ignore friends, or rage-refactor their souls.</strong></p>
            <p>If you're struggling, please reach out:</p>
            <p><a href="https://988lifeline.org" target="_blank" style="color: #ff80bf">988 Lifeline</a> | <a href="https://www.crisistextline.org" target="_blank" style="color: #ff80bf">Crisis Text Line</a></p>
            <button onclick="closeWarning()">I Understand (Continue)</button>
        </div>

        <!-- Reality Check Modal -->
        <div id="realityCheck">
            <h3>ğŸ˜° Reality Check</h3>
            <pre>Youâ€™ve skipped sleep 7 times or chugged 5 coffees. Hands shaking? Heart racing? This isnâ€™t sustainable.</pre>
            <p>Take a break?</p>
            <button onclick="keepGoing()">Keep Going</button>
            <button onclick="pauseGame()">Pause</button>
        </div>

        <!-- Game UI -->
        <div id="gameContainer" style="display: none">
            <h1>â˜ ï¸ Habitapocalypse</h1>
            <p><em>Level up your burnout. Doomshipper edition.</em></p>

            <div class="avatar" id="avatar">Avatar: ğŸ™‚</div>

            <div class="stats">
                <div class="stat">Humanity<br /><span id="humanity">100</span>%</div>
                <div class="stat">Obsolescence<br /><span id="obsol">50</span>%</div>
                <div class="stat">Sanity<br /><span id="sanity">100</span></div>
                <div class="stat">Burnout<br /><span id="burnout">0</span></div>
                <div class="stat">XP<br /><span id="xp">0</span></div>
                <div class="stat">Coffee<br /><span id="coffee">0</span></div>
            </div>

            <div class="buttons">
                <button onclick="doAction('sleep')">ğŸ˜´ Skip Sleep</button>
                <button onclick="doAction('eat')">ğŸ• Forget to Eat</button>
                <button onclick="doAction('friends')">ğŸ™… Ignore Friends</button>
                <button onclick="doAction('deploy')">ğŸ’» Commit to Prod at 3AM</button>
                <button onclick="doAction('doomscroll')">ğŸ“± Doomscroll X</button>
                <button onclick="doAction('refactor')">ğŸ”§ Rage-Refactor</button>
                <button onclick="doAction('legacy')">ğŸ’¾ Legacy Code Hell</button>
                <button onclick="doAction('coffee')">â˜• Drink Coffee</button>

                <!-- Ironic Wellness Actions -->
                <button id="walkBtn" class="hidden" onclick="doAction('walk')">ğŸš¶ Take a 5-Min Walk</button>
                <button id="therapyBtn" class="hidden" onclick="doAction('therapy')">ğŸª‘ Try Therapy (Joke Edition)</button>
                <button id="mealBtn" class="hidden" onclick="doAction('meal')">ğŸ¥— Eat a Real Meal</button>
            </div>

            <div class="title" id="title">Title: Junior Doomshipper</div>
            <div class="log" id="log"></div>

            <div class="nav" onclick="showReviews()">â† Back to Reviews</div>

            <div id="crisisPopup">
                <pre>
  ğŸ˜¢  404: Existential Crisis
  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
  â•‘ ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ â•‘
  â•‘ ğŸ”¥  SERVER MELTDOWN ğŸ”¥ â•‘
  â•‘ ğŸ”¥  DOOMGUY: ğŸ’¥ğŸ”« ğŸ”¥ â•‘
  â•‘ ğŸ”¥  BUGS: ğŸğŸ’€ğŸ’€ ğŸ”¥ â•‘
  â•‘ ğŸ”¥  DATA VOID: âˆ…  ğŸ”¥ â•‘
  â•‘ ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ â•‘
  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  Error: Purpose Not Found. Refactor soul?
      </pre>
                <button onclick="closeCrisis()">Panic Less</button>
            </div>

            <div id="endingPopup">
                <h2 id="endingTitle"></h2>
                <pre id="endingText"></pre>
                <button onclick="closeEnding()">Accept Fate</button>
            </div>

            <div id="toast" class="toast"></div>
            <div class="achievements" id="achievements"></div>
        </div>

        <script>
            let humanity = 100;
            let obsol = 50;
            let sanity = 100;
            let burnout = 0;
            let xp = 0;
            let title = "Junior Doomshipper";
            let sleepStreak = 0;
            let doomscrollStreak = 0;
            let achievements = [];
            let coffeeCount = 0;
            let jitterLevel = 0;
            let botMode = false;

            const log = document.getElementById("log");
            const toast = document.getElementById("toast");
            const crisisPopup = document.getElementById("crisisPopup");
            const endingPopup = document.getElementById("endingPopup");
            const avatar = document.getElementById("avatar");
            const achievementsDiv = document.getElementById("achievements");
            const coffeeStat = document.getElementById("coffee");
            const gameContainer = document.getElementById("gameContainer");
            const warningModal = document.getElementById("warningModal");
            const reviewsPage = document.getElementById("reviewsPage");
            const realityCheck = document.getElementById("realityCheck");

            // Show reviews on load
            window.onload = () => {
                reviewsPage.style.display = "block";
            };

            function startGame() {
                reviewsPage.style.display = "none";
                warningModal.style.display = "block";
            }

            function closeWarning() {
                warningModal.style.display = "none";
                gameContainer.style.display = "flex";
                updateUI();
            }

            function showReviews() {
                gameContainer.style.display = "none";
                reviewsPage.style.display = "block";
            }

            function keepGoing() {
                realityCheck.style.display = "none";
                showToastAndLog("Pushing through the madnessâ€¦");
            }

            function pauseGame() {
                realityCheck.style.display = "none";
                humanity = 100;
                sanity = 100;
                burnout = 0;
                xp = 0;
                sleepStreak = 0;
                doomscrollStreak = 0;
                coffeeCount = 0;
                jitterLevel = 0;
                achievements = [];
                showToastAndLog("Paused. Reset stats. Take care: <a href='https://988lifeline.org' target='_blank' style='color: #ff80bf'>988 Lifeline</a> | <a href='https://www.crisistextline.org' target='_blank' style='color: #ff80bf'>Crisis Text Line</a>");
                updateUI();
            }

            function updateUI() {
                if (botMode) {
                    document.querySelector("h1").textContent = "ğŸ¤– BotModeâ„¢ v0.1";
                    document.querySelector("p em").textContent = "Flesh is obsolete. Code is eternal.";
                }

                document.getElementById("humanity").textContent = Math.max(humanity, 0);
                document.getElementById("obsol").textContent = obsol;
                document.getElementById("sanity").textContent = sanity;
                document.getElementById("burnout").textContent = burnout;
                document.getElementById("xp").textContent = xp;
                document.getElementById("title").textContent = `Title: ${title}`;
                coffeeStat.textContent = coffeeCount;

                // Show wellness buttons if burnout high
                document.getElementById("walkBtn").classList.toggle("hidden", burnout < 30 || botMode);
                document.getElementById("therapyBtn").classList.toggle("hidden", burnout < 30 || botMode);
                document.getElementById("mealBtn").classList.toggle("hidden", burnout < 30 || botMode);

                // Avatar logic
                if (humanity <= 0) avatar.textContent = botMode ? "Avatar: ğŸ¤–" : "Avatar: ğŸ’€";
                else if (humanity <= 50 || sanity <= 50) avatar.textContent = "Avatar: ğŸ˜µ";
                else avatar.textContent = "Avatar: ğŸ™‚";

                avatar.style.color = humanity <= 0 ? "#ff4040" : sanity <= 0 ? "#ff80bf" : "#e8f1ff";

                // Jitter effect with tremor
                if (jitterLevel > 0) {
                    const speed = 0.01 - (jitterLevel * 0.001); // Faster with more coffee (min 0.005s)
                    const magnitude = jitterLevel >= 3 ? 10 : 5; // Larger shifts at 3+ cups
                    gameContainer.style.setProperty('--jitter-speed', `${speed}s`);
                    gameContainer.style.setProperty('--jitter-x', `${magnitude}px`);
                    gameContainer.style.setProperty('--jitter-y', `${magnitude}px`);
                    gameContainer.classList.add("panic");
                } else {
                    gameContainer.style.animation = "none";
                    gameContainer.classList.remove("panic");
                }

                achievementsDiv.innerHTML = achievements.map(ach => `<div>${ach}</div>`).join("");
            }

            function addLog(msg) {
                const p = document.createElement("div");
                p.textContent = msg;
                log.prepend(p);
            }

            function showToastAndLog(msg) {
                toast.textContent = msg;
                toast.classList.add("show");
                addLog(msg);
                setTimeout(() => toast.classList.remove("show"), 3000);
            }

            function showAsciiBanner(msg) {
                addLog(msg);
                if (!achievements.includes(msg)) achievements.push(msg);
                updateUI();
            }

            function closeCrisis() {
                crisisPopup.style.display = "none";
                showToastAndLog("AI Rickroll Protocol: You're not obsolete... yet.");
            }

            function checkTitle() {
                if (botMode) {
                    title = "Singularity Sovereign";
                    return;
                }
                if (xp > 500) title = "Singularity Sovereign";
                else if (xp > 400) title = "Eternal Refactorer";
                else if (xp > 300) title = "Techno-Lich";
                else if (xp > 200) title = "Panic Coder";
                else if (xp > 100) title = "Sleep-Deprived Dev";
            }

            function triggerEnding() {
                const endingTitle = document.getElementById("endingTitle");
                const endingText = document.getElementById("endingText");

                if (xp >= 300) {
                    endingTitle.textContent = "ğŸš€ UPLOAD COMPLETE: HUMANITY NOT REQUIRED";
                    endingText.textContent = `
ğŸ¤– WELCOME TO BotModeâ„¢

You have transcended flesh.
Your heart is now a fan.
Your tears: coolant leaks.

Title: Singularity Sovereign
Achievement Unlocked: ğŸ§¬ Uploaded Self. Left Flesh Behind.

You won.
There's no one left to celebrate.
        `;
                    botMode = true;
                } else {
                    endingTitle.textContent = "â˜ ï¸ SYSTEM FAILURE: INSUFFICIENT OUTPUT";
                    endingText.textContent = `
ğŸ’€ COLLAPSE DETECTED

You burned out...
and gained nothing.

Final Title: Expendable Asset
Achievement: ğŸ§ƒ Spilled Your Own Juice

The machine moved on.
You did not.
        `;
                }
                endingPopup.style.display = "block";
            }

            function closeEnding() {
                endingPopup.style.display = "none";
                updateUI();
            }

            function doAction(type) {
                if (humanity <= 0 && !botMode) {
                    triggerEnding();
                    return;
                }

                let xpChange = 0, humanChange = 0, sanityChange = 0, burnoutChange = 0, obsolChange = 0;

                switch (type) {
                    case "sleep":
                        sleepStreak++;
                        let sleepBonus = sleepStreak >= 3 ? 10 * sleepStreak : 0;
                        xpChange = 50 + sleepBonus;
                        humanChange = -10;
                        sanityChange = -15;
                        obsolChange = 5;
                        burnoutChange = 5;
                        showToastAndLog(`Skipped sleep: +${xpChange} XP, -10 Humanity, -15 Sanity, +5% Obsolescence${sleepStreak >= 3 ? " (Insomnia Multiplier!)" : ""}`);
                        if (sleepStreak === 7) showToastAndLog("ğŸ˜´ğŸ’‰ Unlocked 'Red Bull Veins' skin! Sleep is for humans. You're not.");
                        if (sleepStreak === 7) realityCheck.style.display = "block";
                        break;

                    case "eat":
                        xpChange = 30;
                        humanChange = -5;
                        sanityChange = -10;
                        burnoutChange = 5;
                        showToastAndLog("Forgot to eat: +30 XP, -5 Humanity, -10 Sanity, +5 Burnout");
                        if (xp >= 150 && !achievements.includes("ğŸµ Soylent Skin")) {
                            achievements.push("ğŸµ Soylent Skin");
                            showToastAndLog("Unlocked 'Soylent Skin'! Hunger is obsolete.");
                        }
                        break;

                    case "friends":
                        xpChange = 100;
                        humanChange = -20;
                        sanityChange = -20;
                        obsolChange = -5;
                        showToastAndLog("Ignored friends: +100 XP, -20 Humanity, -20 Sanity, -5% Obsolescence");
                        if (xp >= 300 && !achievements.includes("ğŸš« Social 503: Service Unavailable")) {
                            achievements.push("ğŸš« Social 503: Service Unavailable");
                            showToastAndLog("Earned 'Social 503: Service Unavailable' badge!");
                        }
                        break;

                    case "deploy":
                        xpChange = 70;
                        sanityChange = -25;
                        obsolChange = -10;
                        burnoutChange = 10;
                        showToastAndLog("Committed to prod at 3AM: +70 XP, -25 Sanity, -10% Obsolescence, +10 Burnout");
                        if (Math.random() < 0.02) {
                            crisisPopup.style.display = "block";
                            showToastAndLog("ğŸ”¥ PROD APOCALYPSE! App crashed. Good luck.");
                        }
                        break;

                    case "doomscroll":
                        doomscrollStreak++;
                        let scrollBonus = doomscrollStreak >= 2 ? 20 * doomscrollStreak : 0;
                        xpChange = 60 + scrollBonus;
                        sanityChange = -15;
                        obsolChange = 10;
                        showToastAndLog(`Doomscrolled X: +${60 + scrollBonus} XP, -15 Sanity, +10% Obsolescence${doomscrollStreak >= 2 ? " (Doomscroll Frenzy!)" : ""}`);
                        if (Math.random() < 0.2) {
                            showToastAndLog("ğŸ‘¾ Cacodemon Bug spawned! Debug or lose 10 Humanity.");
                            humanity -= 10;
                        }
                        break;

                    case "refactor":
                        xpChange = 80;
                        sanityChange = -30;
                        burnoutChange = 15;
                        showToastAndLog("Rage-Refactored: +80 XP, -30 Sanity, +15 Burnout");
                        if (Math.random() < 0.1 && !achievements.includes("ğŸ’‡ Null Pointer Hair")) {
                            achievements.push("ğŸ’‡ Null Pointer Hair");
                            showToastAndLog("Unlocked 'Null Pointer Hair'! Refactored into the void.");
                        }
                        break;

                    case "legacy":
                        xpChange = 90;
                        sanityChange = -35;
                        burnoutChange = 20;
                        showToastAndLog("Legacy Code Hell: +90 XP, -35 Sanity, +20 Burnout");
                        if (Math.random() < 0.3) {
                            crisisPopup.style.display = "block";
                            showToastAndLog("ğŸ’¾ Failed Legacy Code Hell! 404: Existential Crisis triggered.");
                        }
                        break;

                    case "coffee":
                        coffeeCount++;
                        jitterLevel = Math.min(Math.floor(coffeeCount / 1), 5);
                        xpChange = 40;
                        sanityChange = -5;
                        burnoutChange = 10;
                        showToastAndLog(`Drank coffee: +40 XP, -5 Sanity, +10 Burnout. Jitter level ${jitterLevel}! â˜•`);
                        if (coffeeCount >= 5 && !achievements.includes("â˜• Caffeine Overlord")) {
                            achievements.push("â˜• Caffeine Overlord");
                            showToastAndLog("Unlocked 'Caffeine Overlord' badge! Jitters eternal.");
                        }
                        if (coffeeCount === 5) realityCheck.style.display = "block";
                        break;

                    // Ironic Wellness
                    case "walk":
                        xpChange = -20;
                        humanChange = 15;
                        sanityChange = 10;
                        burnoutChange = -5;
                        showToastAndLog("Took a walk: -20 XP, +15 Humanity, +10 Sanity, -5 Burnout");
                        if (!achievements.includes("ğŸŒ± Briefly Considered Therapy")) {
                            achievements.push("ğŸŒ± Briefly Considered Therapy");
                            showToastAndLog("Achievement: 'Briefly Considered Therapy'");
                        }
                        break;

                    case "therapy":
                        xpChange = -50;
                        humanChange = 20;
                        sanityChange = 25;
                        burnoutChange = -10;
                        showToastAndLog("Tried therapy: -50 XP, +20 Humanity, +25 Sanity, -10 Burnout");
                        showToastAndLog("AI Therapist: 'You're projecting. Have you tried not feeling?'");
                        break;

                    case "meal":
                        xpChange = -30;
                        humanChange = 25;
                        sanityChange = 15;
                        burnoutChange = -5;
                        showToastAndLog("Ate a real meal: -30 XP, +25 Humanity, +15 Sanity, -5 Burnout");
                        if (!achievements.includes("ğŸ½ï¸ Taste Buds Reactivated")) {
                            achievements.push("ğŸ½ï¸ Taste Buds Reactivated");
                            showToastAndLog("Achievement: 'Taste Buds Reactivated'");
                        }
                        break;
                }

                // Apply changes
                xp += xpChange;
                humanity += humanChange;
                sanity += sanityChange;
                burnout += burnoutChange;
                obsol += obsolChange;

                // Clamp
                humanity = Math.max(humanity, 0);
                sanity = Math.max(sanity, 0);
                obsol = Math.max(0, Math.min(100, obsol));
                burnout = Math.min(burnout, 100);

                // Check for ending
                if (humanity <= 0 && !botMode) {
                    setTimeout(triggerEnding, 500);
                }

                // Ascension banner
                if (xp >= 300 && !achievements.includes("ğŸ–¥ï¸ Techno-Lich Ascended") && !botMode) {
                    showAsciiBanner("ğŸ–¥ï¸ Techno-Lich Ascended\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•—\nâ•‘ ğŸ’€ğŸ”¥ASCENDğŸ”¥ğŸ’€ â•‘\nâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•");
                }

                checkTitle();
                updateUI();
            }

            console.log("Habitapocalypse v0.8: Tremor is the new code pulse. Humanity is optional.");
        </script>
    </body>
</html>
